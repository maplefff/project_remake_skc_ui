# 開發階段四：前端介面開發

**對應主計畫階段:** [階段四：前端介面開發 (Frontend UI Development - Vue)](Development_plan.md#階段四前端介面開發-frontend-ui-development---vue)

**視覺目標:** 完全複製舊專案截圖 (`/Users/wu_cheng_yan/cursor/project_remake_skc_ui/UI_example.png`) 中的 UI 外觀、佈局、顏色和細節。

**目標:** 完成一個功能完整、響應式、且在視覺細節上（包括按鈕樣式、海報淡出、顏色主題）與參考截圖無法區分的使用者介面。能正確調用後端爬蟲、處理資料/狀態，並按設計要求清晰展示所有電影資訊和時刻表。

## 詳細任務分解

### 1. 搭建主佈局

*   **任務:** 使用 Element Plus 的佈局元件創建雙欄佈局，並應用正確的深色主題樣式。
*   **步驟:**
    1.  修改 `src/App.vue` 或創建一個新的主視圖元件 (例如 `src/views/HomeView.vue`)。
    2.  使用 `ElContainer`, `ElHeader` (如果需要標題欄), `ElAside`, `ElMain` 搭建基本結構。
    3.  為 `ElAside` 和 `ElMain` 設置合適的寬度或比例，確保與截圖佈局一致。
    4.  應用在階段一中定義的 CSS 變數來設置背景色、邊框等樣式，確保與 `UI_example.png` 視覺匹配。
*   **驗證:** 運行 `npm run dev`，應用顯示基本的雙欄佈局，顏色主題正確。

### 2. 開發左側電影列表元件 (`MovieList.vue`)

*   **任務:** 創建可滾動的電影列表，顯示預覽卡片，實現排序和選擇功能。
*   **步驟:**
    1.  創建 `src/components/MovieList.vue` 元件。
    2.  **資料獲取與狀態管理:**
        *   在 `MovieList.vue` 或其父元件中，使用 `ref` 或 `reactive` 定義響應式變數來儲存電影列表 (`CombinedMovie[]`)、加載狀態 (`boolean`)、錯誤狀態 (`string | null`) 和當前選中的電影 (`CombinedMovie | null`)。
        *   在元件掛載時 (`onMounted`)，異步調用 `window.electronAPI.getCombinedMovies()`。
        *   處理 Promise 的狀態：開始時設置加載狀態為 true，成功時更新電影列表並設置加載為 false，失敗時設置錯誤狀態並設置加載為 false。
    3.  **列表渲染與排序:**
        *   使用 `v-if` 根據加載和錯誤狀態顯示不同的內容 (例如 `ElSkeleton` 加載骨架屏，或錯誤提示)。
        *   使用 `v-for` 遍歷獲取的電影資料。**在渲染前，根據 `imdbRating` 對電影陣列進行降序排序** (可以使用計算屬性 `computed` 來處理排序後的列表)。
    4.  **卡片元件:**
        *   為每個電影渲染一個卡片（可以使用 `ElCard` 或自定義 div 結構）。
        *   **樣式:** 仔細調整卡片樣式（內外邊距、背景色、圓角、陰影）以匹配截圖。
        *   **內容:**
            *   `ElImage`: 顯示 `posterUrl`，設置 `lazy` 加載。**應用自訂 CSS 實現底部的垂直漸變淡出效果**。
            *   顯示 `movieName`, `englishTitle`。
            *   顯示 IMDb 評分：使用 `ElIcon` (星星圖標) + `imdbRating` 數字。**確保字體、大小、顏色與截圖一致。**
        *   **交互:**
            *   為卡片添加 `@click` 事件處理器，點擊時更新父元件或全局狀態中的「當前選中電影」。
            *   根據「當前選中電影」的 ID，動態地為被選中的卡片添加一個 CSS class（例如 `is-selected`），並定義該 class 的樣式（例如不同的背景色或邊框）以匹配截圖的選中效果。
    5.  **滾動:** 確保 `ElAside` 或其內部容器具有固定高度和 `overflow-y: auto` 以實現列表滾動。
*   **驗證:**
    *   列表能成功加載並顯示電影卡片。
    *   卡片按 IMDb 評分正確排序。
    *   卡片樣式（包括海報淡出）與截圖一致。
    *   點擊卡片能觸發選中狀態，並有正確的視覺反饋。
    *   列表內容過多時可以正常滾動。
*   **可能挑戰:** CSS 樣式微調（特別是漸變和選中效果）；響應式狀態管理；異步資料加載和錯誤處理。

### 3. 開發右側電影詳情元件 (`MovieDetail.vue`)

*   **任務:** 根據左側列表的選擇，顯示完整的電影詳細資訊和時刻表。
*   **步驟:**
    1.  創建 `src/components/MovieDetail.vue` 元件。
    2.  **接收選中電影:** 使用 `props` 從父元件接收當前選中的 `CombinedMovie` 物件（或 `null`）。
    3.  **內容渲染:**
        *   使用 `v-if` 判斷是否有選中的電影，如果沒有則顯示提示資訊（例如 "請從左側選擇一部電影"）。
        *   如果有選中的電影，則渲染其詳細資訊：
            *   `ElImage`: 顯示大海報 (`posterUrl`)。
            *   顯示 `movieName`, `englishTitle`。
            *   顯示詳細 IMDb 評分（例如 "☆ 8.8 / 10 (IMDb)"）。
            *   `ElTag`: 使用 `v-for` 遍歷 `genres` 陣列，為每個類型創建一個 `ElTag`。**調整 `ElTag` 樣式以匹配截圖**。
            *   顯示 `導演：` + `directors`。
            *   顯示 `主演：` + `cast`。
            *   顯示 `片長：` + `runtimeMinutes` (可能需要格式化為 "X 小時 Y 分")。
            *   顯示 `劇情簡介` 標題和 `plot` 文本。
        *   **時刻表渲染:**
            *   **按日期分組:** 需要編寫邏輯（可能在父元件或 `MovieDetail` 中使用 `computed`）將 `sessions` 陣列按 `date` 分組。
            *   使用 `v-for` 遍歷分組後的日期。
            *   顯示日期標題（例如 "時刻表 - 週三 (04/30)"）。
            *   在每個日期下，顯示影廳/語言版本 (`theater`)。
            *   使用 `v-for` 遍歷該日期下的場次時間 (`showtime`)。
            *   **使用 `ElButton` 並應用自訂 CSS 樣式** (藍色背景、白色文字、圓角等) 來顯示每個 `showtime`，確保外觀與截圖按鈕一致。
    4.  **樣式:** 仔細調整各個元素（標題、文本、圖片、標籤、按鈕）的字體、大小、顏色、間距，使其佈局和視覺風格與截圖高度一致。
*   **驗證:**
    *   未選擇電影時顯示提示。
    *   選擇電影後，右側正確顯示所有詳細資訊。
    *   時刻表按日期正確分組顯示。
    *   放映時間按鈕樣式與截圖一致。
    *   整體佈局和樣式與截圖一致。
*   **可能挑戰:** 時刻表按日期分組的邏輯；精確的 CSS 樣式調整；確保所有資訊欄位都正確顯示。

### 4. 組裝與整合

*   **任務:** 將 `MovieList` 和 `MovieDetail` 元件整合到主佈局中，並處理它們之間的狀態傳遞。
*   **步驟:**
    1.  在 `App.vue` 或 `HomeView.vue` 中，引入並使用 `MovieList` 和 `MovieDetail` 元件。
    2.  在父元件中管理「當前選中電影」的狀態。
    3.  將電影列表資料和選中狀態傳遞給 `MovieList`。
    4.  將選中的電影物件作為 prop 傳遞給 `MovieDetail`。
    5.  處理從 `MovieList` 發出的選中事件，更新父元件的狀態。
*   **驗證:** 整個應用程式流程（加載資料 -> 顯示列表 -> 點擊選擇 -> 更新詳情）正常工作。

## 階段性測試

*   **任務:** 全面測試 UI 的視覺效果、交互和與後端 IPC 的協同工作。
*   **步驟:**
    1.  **開發模式測試:**
        *   執行 `npm run dev`。
        *   仔細對比運行中的應用介面與 `UI_example.png` 截圖，檢查佈局、顏色、字體、間距、按鈕樣式、海報淡出等所有視覺細節是否一致。
        *   測試列表滾動、電影選擇、詳情更新等交互是否流暢且符合預期。
        *   確保資料加載、錯誤提示等狀態顯示正常。
    2.  **打包測試:**
        *   執行 `npm run build`。
        *   安裝並運行打包後的應用程式。
        *   重複進行全面的視覺和功能驗證，確保在打包環境下表現一致。
*   **目標:** 獲得一個在功能和視覺上都高度符合設計要求的應用版本。

## 階段產出物

*   完成的 `MovieList.vue` 和 `MovieDetail.vue` 元件。
*   符合視覺目標的主應用介面。
*   通過了本階段全面的開發模式和打包測試。 